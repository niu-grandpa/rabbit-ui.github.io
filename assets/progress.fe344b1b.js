import{$ as u,P as i,i as l,s as a,b as n,r as d,c as g,d as _}from"./index.5a6af0e1.js";import{v as S}from"./validComps.1ddad215.js";const h={success:'<i class="rab-icon rab-icon-ios-checkmark-circle"></i>',warning:'<i class="rab-icon rab-icon-ios-alert"></i>',wrong:'<i class="rab-icon rab-icon-ios-close-circle"></i>'};class P{constructor(){this.VERSION="v1.0",this.COMPONENTS=u("r-progress",{all:!0}),this._create(this.COMPONENTS)}config(t){const s=u(t);S(s,"progress");const r=s.querySelector(`.${i.progress}-bg`),e=s.querySelector(`.${i.progress}-success-bg`),o=s.querySelector(`.${i.progress}-inner-text`);return{get percent(){return r},set percent(c){!l(c)||c==r.style.width||(o&&a(o,`${c}%`),n(r,"width",`${c}%`))},get successPercent(){return e},set successPercent(c){!l(c)||c==e.style.width||n(e,"width",`${c}%`)}}}_create(t){t.forEach(s=>{this._createChildNodes(s),d(s,["percent","show-text","text-inside","stroke-width","stroke-color","success-percent"])})}_createChildNodes(t){const s=g("div"),r=g("div"),e=g("div"),o=g("div");s.className=`${i.progress}-outer`,r.className=`${i.progress}-inner`,e.className=`${i.progress}-bg`,o.className=`${i.progress}-success-bg`,this._setPercent(t,e,o),this._setStrokeWidth(t,e,o),this._setStrokeColor(t,e),r.append(e,o),s.appendChild(r),t.appendChild(s),this._showText(t,e)}_setPercent(t,s,r){const e=`${this._getPercent(t)}%`,o=`${this._getSuccessPercent(t)}%`;n(s,"width",e),n(r,"width",o)}_setStrokeWidth(t,s,r){const e=`${this._getStrokeWidth(t)}px`;n(s,"height",e),n(r,"height",e)}_showText(t,s){if(!this._isShowText(t))return;const r=g("div"),e=g("span");r.className=`${i.progress}-text`,e.className=`${i.progress}-inner-text`;const o=`${this._getPercent(t)}%`;_(e,o),this._isTextInside(t)?s.appendChild(e):(t.className=`${i.progress}-show-info`,this._getStatus(t)==="success"?a(e,h.success):this._getStatus(t)==="warning"?a(e,h.warning):this._getStatus(t)==="wrong"&&a(e,h.wrong),r.appendChild(e),t.appendChild(r))}_setStrokeColor(t,s){const{from:r,to:e}=this._getStrokeColor(t);if(r.length||e.length){const o=`linear-gradient(to right, ${r} 0%, ${e} 100%)`;n(s,"backgroundImage",o)}}_getStatus(t){return t.getAttribute("status")}_getPercent(t){return t.getAttribute("percent")||"0"}_getSuccessPercent(t){return t.getAttribute("success-percent")||"0"}_getStrokeWidth(t){return t.getAttribute("stroke-width")||"10"}_getStrokeColor(t){var s;if(t.getAttribute("stroke-color")){const r=((s=t.getAttribute("stroke-color"))==null?void 0:s.replace(/'/g,'"'))||"",e=JSON.parse(r);return{from:e[0],to:e[1]}}else return{from:[],to:[]}}_isTextInside(t){return t.getAttribute("text-inside")==="true"}_isShowText(t){return t.getAttribute("show-text")!=="false"}}var m=P;export{m as P};
