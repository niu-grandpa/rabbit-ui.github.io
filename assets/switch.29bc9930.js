import{$,P as c,m as p,r as S,s as o,b as g,e as f,n as u,l as w,f as k}from"./index.6eec8bf7.js";import{v as L}from"./validComps.1ddad215.js";class C{constructor(){this.VERSION="1.0",this.COMPONENTS=$("r-switch",{all:!0}),this._create(this.COMPONENTS)}config(s){const t=$(s);L(t,"switch");const e=t.querySelector('input[type="hidden"]'),a=e.value==="true",n=t.classList.contains(`${c.switch}-disabled`),r=t.classList.contains(`${c.switch}-loading`),h=(i,l,d)=>{i&&!w(i)||i&&l||(t.classList.add(`${c.switch}-${d}`),i==!1&&t.classList.remove(`${c.switch}-${d}`))};return{get checked(){return a},set checked(i){h(i,a,"checked")},get disabled(){return n},set disabled(i){h(i,n,"disabled")},get loading(){return r},set loading(i){h(i,r,"loading")},events({onChange:i}){let l;p(t,"click",()=>{l=JSON.parse(e.value),i&&k(i,l)})}}}_create(s){s.forEach(t=>{t.setAttribute("tabindex","0");const{checked:e,loading:a,disabled:n,size:r,open:h,close:i,trueColor:l,falseColor:d}=this._attrs(t);this._setSize(t,r),this._setMainTemplate(t),this._setDisabled(t,n),this._setLoading(t,a),this._setStatusBgc(t,e,l,d);const b=t.querySelector(`.${c.switch}-inner`),_=t.querySelector('input[type="hidden"]');this._setChecked(t,_,e),this._setStatusText(b,e,h,i),this._handleChange(t,_,b,{open:h,close:i,trueColor:l,falseColor:d}),S(t,["checked","loading","disabled","size","open","close","true-color","false-color"])})}_setDisabled(s,t){!t||s.classList.add(`${c.switch}-disabled`)}_setLoading(s,t){!t||s.classList.add(`${c.switch}-loading`)}_setSize(s,t){!t||t==="default"||s.classList.add(`${c.switch}-${t}`)}_setMainTemplate(s){const t=`
        <input type="hidden" /> 
        <span class="${c.switch}-inner"></span>
        `;o(s,t)}_handleChange(s,t,e,a){p(s,"click",()=>{const r=s.classList.contains(`${c.switch}-loading`);if(s.classList.contains(`${c.switch}-disabled`)||r)return!1;const i=s.classList.contains(`${c.switch}-checked`);let l=!1;i?s.classList.remove(`${c.switch}-checked`):(l=!l,s.classList.add(`${c.switch}-checked`)),this._setChecked(s,t,l),this._setStatusBgc(s,l,a.trueColor,a.falseColor),this._setStatusText(e,l,a.open,a.close)})}_setChecked(s,t,e){e&&s.classList.add(`${c.switch}-checked`),t.value=`${e}`}_setStatusText(s,t,e,a){const n=(r,h)=>{r&&(h?o(s,r):o(s,r))};n(e,t),n(a,!t),t?o(s,e):o(s,a)}_setStatusBgc(s,t,e,a){e&&t&&(g(s,"backgroundColor",e),g(s,"borderColor",e)),a&&(t||(g(s,"backgroundColor",a),g(s,"borderColor",a)))}_attrs(s){return{checked:f(s,"checked"),loading:f(s,"loading"),disabled:f(s,"disabled"),size:u(s,"size","default"),open:u(s,"open",""),close:u(s,"close",""),trueColor:u(s,"true-color",""),falseColor:u(s,"false-color","")}}}var y=C;export{y as S};
